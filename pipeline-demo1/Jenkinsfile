pipeline{
    agent any
    environment {
        ENV_TAG = "devvvv"
        WEEE_APP = "pipeline-demo1"
        VIRTUAL_ENV_TAG = "x-canary-tag"
    }
//     parameters {
//         gitParameter branchFilter: 'origin/(.*)',
//             defaultValue: 'master',
//             name: 'VERSION',
//             type: 'PT_BRANCH',
//             sortMode: 'DESCENDING_SMART',
//             useRepository: "https://github.com/GacuiSayweee/gacui-ops-cicd.git"
//         virtualEnv name: 'x-canary-tag', baseTag: "dev"
//     }
    properties([
        parameters(
            [
                virtualEnv(name: 'x-canary-tag', baseTag: 'dev'),
            ]
        )
    ])
    stages {
        stage('Deploy') {
            steps{
                script {
                    deploymentEnhance(appname: "${env.WEEE_APP}", virtualEnvTag: "${env.VIRTUAL_ENV_TAG}")
                    sh """
                    echo "cat deploy.yaml --->>>"
                    cat /var/jenkins_home/workspace/pipeline-demo1/deploy.yaml
                    echo "cat deploy.yaml ---<<<"
                    """
                }

            }
        }
    }
}
